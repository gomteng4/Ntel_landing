(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{530:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5155),a=t(2115),l=t(5695),i=t(6874),n=t.n(i),c=t(2099);function d(){let[e,s]=(0,a.useState)(!1),[t,i]=(0,a.useState)([]),[d,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1),b=(0,l.useRouter)();(0,a.useEffect)(()=>{"true"===localStorage.getItem("admin_auth")?(s(!0),p()):b.push("/admin")},[b]);let p=async()=>{try{let{data:e}=await c.N.from("customer_reviews").select("*").order("sort_order");e&&i(e)}catch(e){console.error("Error fetching reviews:",e)}finally{m(!1)}},f=async e=>{try{if(e.id&&"new"!==e.id){let{id:s,created_at:t,updated_at:r,...a}=e,{error:l}=await c.N.from("customer_reviews").update(a).eq("id",e.id);if(l)throw l}else{let{id:s,created_at:t,updated_at:r,...a}=e,{error:l}=await c.N.from("customer_reviews").insert(a);if(l)throw l}await p(),g(!1),u(null),alert("리뷰가 저장되었습니다!")}catch(e){console.error("Error saving review:",e),alert("저장 중 오류가 발생했습니다.")}},v=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{let{error:s}=await c.N.from("customer_reviews").delete().eq("id",e);if(s)throw s;await p(),alert("리뷰가 삭제되었습니다!")}catch(e){console.error("Error deleting review:",e),alert("삭제 중 오류가 발생했습니다.")}},N={id:"new",customer_name:"",rating:5,review_text:"",sort_order:t.length+1,is_active:!0,created_at:"",updated_at:""},y=e=>Array.from({length:5},(s,t)=>(0,r.jsx)("span",{className:"text-lg ".concat(t<e?"text-yellow-400":"text-gray-300"),children:"★"},t));return!e||d?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"로딩 중..."})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n(),{href:"/admin/dashboard",className:"text-blue-600 hover:text-blue-800 mr-4",children:"← 대시보드"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"고객 리뷰 관리"})]}),(0,r.jsx)("button",{onClick:()=>{u(N),g(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"새 리뷰 추가"})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[h&&x&&(0,r.jsx)(o,{review:x,onSave:f,onCancel:()=>{g(!1),u(null)}}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("div",{className:"flex justify-center mb-3",children:y(e.rating)}),(0,r.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed mb-4 text-center",children:e.review_text}),(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:e.customer_name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"고객님"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[(0,r.jsx)("span",{className:"text-sm ".concat(e.is_active?"text-green-600":"text-red-600"),children:e.is_active?"활성":"비활성"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{u(e),g(!0)},className:"text-blue-600 hover:text-blue-800 px-2 py-1 text-sm",children:"편집"}),(0,r.jsx)("button",{onClick:()=>v(e.id),className:"text-red-600 hover:text-red-800 px-2 py-1 text-sm",children:"삭제"})]})]})]},e.id))})]})]})}function o(e){let{review:s,onSave:t,onCancel:l}=e,[i,n]=(0,a.useState)(s);return(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg mb-6",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"new"===s.id?"새 리뷰 추가":"리뷰 편집"})}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(i)},className:"px-6 py-4 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"고객명"}),(0,r.jsx)("input",{type:"text",value:i.customer_name,onChange:e=>n({...i,customer_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"김○○",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"별점"}),(0,r.jsx)("select",{value:i.rating,onChange:e=>n({...i,rating:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[1,2,3,4,5].map(e=>(0,r.jsxs)("option",{value:e,children:[e,"점"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"리뷰 내용"}),(0,r.jsx)("textarea",{value:i.review_text,onChange:e=>n({...i,review_text:e.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"고객님의 소중한 후기를 입력하세요",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"순서"}),(0,r.jsx)("input",{type:"number",value:i.sort_order,onChange:e=>n({...i,sort_order:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsx)("div",{className:"flex items-center pt-8",children:(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:i.is_active,onChange:e=>n({...i,is_active:e.target.checked}),className:"rounded"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"활성화"})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"취소"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"저장"})]})]})]})}},1981:(e,s,t)=>{Promise.resolve().then(t.bind(t,530))},2099:(e,s,t)=>{"use strict";t.d(s,{N:()=>n});var r=t(5647),a=t(9509);let l=a.env.NEXT_PUBLIC_SUPABASE_URL||"https://suznpkxteqhvqvlaenrq.supabase.co",i=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1em5wa3h0ZXFodnF2bGFlbnJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzQ2NDYsImV4cCI6MjA2NjkxMDY0Nn0.hgGYLUWMoyjB4SpyEfR2nOqaAvPonaefyRZ6T3UYRO8",n=(0,r.UU)(l,i)},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})}},e=>{var s=s=>e(e.s=s);e.O(0,[874,647,441,303,358],()=>s(1981)),_N_E=e.O()}]);