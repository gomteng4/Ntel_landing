(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{1535:(e,t,s)=>{Promise.resolve().then(s.bind(s,5928))},2099:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});var r=s(5647),l=s(9509);let a=l.env.NEXT_PUBLIC_SUPABASE_URL||"https://suznpkxteqhvqvlaenrq.supabase.co",n=l.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1em5wa3h0ZXFodnF2bGFlbnJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzQ2NDYsImV4cCI6MjA2NjkxMDY0Nn0.hgGYLUWMoyjB4SpyEfR2nOqaAvPonaefyRZ6T3UYRO8",i=(0,r.UU)(a,n)},5552:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(5155),l=s(2115),a=s(2099);function n(e){let{currentImageUrl:t,onImageUploaded:s,folder:n="general",placeholder:i="이미지를 선택하세요",className:o=""}=e,[d,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)(t||null),x=(0,l.useRef)(null),b=async e=>{try{c(!0);let t=e.name.split(".").pop(),r="".concat(Date.now(),".").concat(t),l="".concat(n,"/").concat(r),{data:i,error:o}=await a.N.storage.from("images").upload(l,e);if(o)throw o;let{data:{publicUrl:d}}=a.N.storage.from("images").getPublicUrl(l);m(d),s(d)}catch(e){console.error("이미지 업로드 오류:",e),alert("이미지 업로드 중 오류가 발생했습니다.")}finally{c(!1)}},h=()=>{m(null),s(""),x.current&&(x.current.value="")};return(0,r.jsxs)("div",{className:"space-y-4 ".concat(o),children:[(0,r.jsx)("input",{ref:x,type:"file",accept:"image/*",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(!s)return;if(!s.type.startsWith("image/"))return void alert("이미지 파일만 업로드 가능합니다.");if(s.size>5242880)return void alert("파일 크기는 5MB 이하여야 합니다.");let r=new FileReader;r.onload=()=>{m(r.result)},r.readAsDataURL(s),b(s)},className:"hidden"}),u?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:u,alt:"미리보기",className:"w-full h-48 object-cover rounded-lg border border-gray-300"}),(0,r.jsx)("button",{type:"button",onClick:h,className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,r.jsx)("div",{className:"w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:i})]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{var e;null==(e=x.current)||e.click()},disabled:d,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:d?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"업로드 중..."]}):"이미지 선택"}),u&&(0,r.jsx)("button",{type:"button",onClick:h,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm font-medium transition-colors",children:"제거"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"JPG, PNG, GIF 파일만 업로드 가능하며, 최대 크기는 5MB입니다."})]})}},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},5928:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),l=s(2115),a=s(5695),n=s(6874),i=s.n(n),o=s(2099),d=s(5552);function c(){let[e,t]=(0,l.useState)(!1),[s,n]=(0,l.useState)([]),[d,c]=(0,l.useState)(!0),[m,x]=(0,l.useState)(!1),[b,h]=(0,l.useState)(null),g=(0,a.useRouter)();(0,l.useEffect)(()=>{"true"===localStorage.getItem("admin_auth")?(t(!0),p()):g.push("/admin")},[g]);let p=async()=>{try{let{data:e}=await o.N.from("banners").select("*").order("sort_order");e&&n(e)}catch(e){console.error("Error fetching banners:",e)}finally{c(!1)}},y=async e=>{try{if(e.id&&"new"!==e.id){let{id:t,created_at:s,updated_at:r,...l}=e,{error:a}=await o.N.from("banners").update(l).eq("id",e.id);if(a)throw a}else{let{id:t,created_at:s,updated_at:r,...l}=e,{error:a}=await o.N.from("banners").insert(l);if(a)throw a}await p(),x(!1),h(null),alert("배너가 저장되었습니다!")}catch(e){console.error("Error saving banner:",e),alert("저장 중 오류가 발생했습니다.")}},f=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{let{error:t}=await o.N.from("banners").delete().eq("id",e);if(t)throw t;await p(),alert("배너가 삭제되었습니다!")}catch(e){console.error("Error deleting banner:",e),alert("삭제 중 오류가 발생했습니다.")}},v={id:"new",title:"",subtitle:"",image_url:"",button_text:"",button_url:"",buttons:[],background_color:"#3b82f6",sort_order:s.length+1,is_active:!0,created_at:"",updated_at:""};return!e||d?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"로딩 중..."})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i(),{href:"/admin/dashboard",className:"text-blue-600 hover:text-blue-800 mr-4",children:"← 대시보드"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"배너 관리"})]}),(0,r.jsx)("button",{onClick:()=>{h(v),x(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"새 배너 추가"})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[m&&b&&(0,r.jsx)(u,{banner:b,onSave:y,onCancel:()=>{x(!1),h(null)}}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(e=>(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[e.image_url&&(0,r.jsx)("div",{className:"h-48 bg-center bg-cover",style:{backgroundImage:"url(".concat(e.image_url,")")}}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),e.subtitle&&(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:e.subtitle}),e.button_text&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:["기본 버튼: ",e.button_text]})}),e.buttons&&e.buttons.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"추가 버튼들:"}),(0,r.jsx)("div",{className:"space-y-2",children:e.buttons.map((e,t)=>(0,r.jsxs)("span",{className:"inline-block px-3 py-1 rounded-full text-sm mr-2 ".concat("primary"===e.style?"bg-blue-100 text-blue-800":"secondary"===e.style?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:[e.text," (",e.style,")"]},t))})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsx)("span",{className:"text-sm ".concat(e.is_active?"text-green-600":"text-red-600"),children:e.is_active?"활성":"비활성"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{h(e),x(!0)},className:"text-blue-600 hover:text-blue-800 px-2 py-1 text-sm",children:"편집"}),(0,r.jsx)("button",{onClick:()=>f(e.id),className:"text-red-600 hover:text-red-800 px-2 py-1 text-sm",children:"삭제"})]})]})]})]},e.id))})]})]})}function u(e){var t;let{banner:s,onSave:a,onCancel:n}=e,[i,o]=(0,l.useState)(s),c=(e,t,s)=>{if(!i.buttons)return;let r=[...i.buttons];r[e]={...r[e],[t]:s},o({...i,buttons:r})},u=e=>{if(!i.buttons)return;let t=i.buttons.filter((t,s)=>s!==e);o({...i,buttons:t})};return(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg mb-6",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"new"===s.id?"새 배너 추가":"배너 편집"})}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(i)},className:"px-6 py-4 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"배너 제목"}),(0,r.jsx)("input",{type:"text",value:i.title,onChange:e=>o({...i,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"부제목"}),(0,r.jsx)("input",{type:"text",value:i.subtitle||"",onChange:e=>o({...i,subtitle:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"배너 이미지"}),(0,r.jsx)(d.A,{currentImageUrl:i.image_url,onImageUploaded:e=>o({...i,image_url:e}),folder:"banners",placeholder:"배너 이미지를 업로드하세요"})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"기본 버튼 (기존)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"버튼 텍스트"}),(0,r.jsx)("input",{type:"text",value:i.button_text||"",onChange:e=>o({...i,button_text:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"지금 상담받기"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"버튼 URL"}),(0,r.jsx)("input",{type:"url",value:i.button_url||"",onChange:e=>o({...i,button_url:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"})]})]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"추가 버튼 (최대 3개)"}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=i.buttons||[];if(e.length>=3)return void alert("최대 3개의 버튼만 추가할 수 있습니다.");o({...i,buttons:[...e,{text:"",url:"",style:"primary"}]})},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"+ 버튼 추가"})]}),null==(t=i.buttons)?void 0:t.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"버튼 텍스트"}),(0,r.jsx)("input",{type:"text",value:e.text,onChange:e=>c(t,"text",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"버튼 텍스트"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"URL"}),(0,r.jsx)("input",{type:"url",value:e.url,onChange:e=>c(t,"url",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"https://..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"스타일"}),(0,r.jsxs)("select",{value:e.style,onChange:e=>c(t,"style",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"primary",children:"Primary"}),(0,r.jsx)("option",{value:"secondary",children:"Secondary"}),(0,r.jsx)("option",{value:"outline",children:"Outline"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{type:"button",onClick:()=>u(t),className:"text-red-600 hover:text-red-800 text-sm",children:"삭제"})})]},t))]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"배경색"}),(0,r.jsx)("input",{type:"color",value:i.background_color,onChange:e=>o({...i,background_color:e.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"정렬 순서"}),(0,r.jsx)("input",{type:"number",value:i.sort_order,onChange:e=>o({...i,sort_order:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"상태"}),(0,r.jsxs)("select",{value:i.is_active?"true":"false",onChange:e=>o({...i,is_active:"true"===e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"true",children:"활성"}),(0,r.jsx)("option",{value:"false",children:"비활성"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,r.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"취소"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"저장"})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,647,441,303,358],()=>t(1535)),_N_E=e.O()}]);