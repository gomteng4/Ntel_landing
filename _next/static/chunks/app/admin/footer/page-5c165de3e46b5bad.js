(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[684],{2013:(e,l,s)=>{Promise.resolve().then(s.bind(s,7398))},2099:(e,l,s)=>{"use strict";s.d(l,{N:()=>d});var r=s(5647),t=s(9509);let a=t.env.NEXT_PUBLIC_SUPABASE_URL||"https://suznpkxteqhvqvlaenrq.supabase.co",n=t.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1em5wa3h0ZXFodnF2bGFlbnJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzQ2NDYsImV4cCI6MjA2NjkxMDY0Nn0.hgGYLUWMoyjB4SpyEfR2nOqaAvPonaefyRZ6T3UYRO8",d=(0,r.UU)(a,n)},5552:(e,l,s)=>{"use strict";s.d(l,{A:()=>n});var r=s(5155),t=s(2115),a=s(2099);function n(e){let{currentImageUrl:l,onImageUploaded:s,folder:n="general",placeholder:d="이미지를 선택하세요",className:o=""}=e,[i,c]=(0,t.useState)(!1),[m,u]=(0,t.useState)(l||null),x=(0,t.useRef)(null),g=async e=>{try{c(!0);let l=e.name.split(".").pop(),r="".concat(Date.now(),".").concat(l),t="".concat(n,"/").concat(r),{data:d,error:o}=await a.N.storage.from("images").upload(t,e);if(o)throw o;let{data:{publicUrl:i}}=a.N.storage.from("images").getPublicUrl(t);u(i),s(i)}catch(e){console.error("이미지 업로드 오류:",e),alert("이미지 업로드 중 오류가 발생했습니다.")}finally{c(!1)}},b=()=>{u(null),s(""),x.current&&(x.current.value="")};return(0,r.jsxs)("div",{className:"space-y-4 ".concat(o),children:[(0,r.jsx)("input",{ref:x,type:"file",accept:"image/*",onChange:e=>{var l;let s=null==(l=e.target.files)?void 0:l[0];if(!s)return;if(!s.type.startsWith("image/"))return void alert("이미지 파일만 업로드 가능합니다.");if(s.size>5242880)return void alert("파일 크기는 5MB 이하여야 합니다.");let r=new FileReader;r.onload=()=>{u(r.result)},r.readAsDataURL(s),g(s)},className:"hidden"}),m?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:m,alt:"미리보기",className:"w-full h-48 object-cover rounded-lg border border-gray-300"}),(0,r.jsx)("button",{type:"button",onClick:b,className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,r.jsx)("div",{className:"w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,r.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:d})]})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{var e;null==(e=x.current)||e.click()},disabled:i,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:i?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"업로드 중..."]}):"이미지 선택"}),m&&(0,r.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm font-medium transition-colors",children:"제거"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"JPG, PNG, GIF 파일만 업로드 가능하며, 최대 크기는 5MB입니다."})]})}},5695:(e,l,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(l,{useRouter:function(){return r.useRouter}})},7398:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>c});var r=s(5155),t=s(2115),a=s(5695),n=s(6874),d=s.n(n),o=s(2099),i=s(5552);function c(){var e,l,s;let[n,c]=(0,t.useState)(!1),[m,u]=(0,t.useState)(null),[x,g]=(0,t.useState)(!0),[b,h]=(0,t.useState)(!1),p=(0,a.useRouter)();(0,t.useEffect)(()=>{"true"===localStorage.getItem("admin_auth")?(c(!0),y()):p.push("/admin")},[p]);let y=async()=>{try{let{data:e}=await o.N.from("footer_settings").select("*").single();e&&u(e)}catch(e){console.error("Error fetching footer settings:",e)}finally{g(!1)}},v=async e=>{if(e.preventDefault(),m){h(!0);try{let{id:e,created_at:l,updated_at:s,...r}=m,{error:t}=await o.N.from("footer_settings").upsert(r);if(t)throw t;alert("푸터 설정이 저장되었습니다!")}catch(e){console.error("Error saving footer settings:",e),alert("저장 중 오류가 발생했습니다.")}finally{h(!1)}}},f=(e,l)=>{m&&u({...m,[e]:l})},j=(e,l,s)=>{if(!(null==m?void 0:m.qr_codes))return;let r=[...m.qr_codes];r[e]={...r[e],[l]:s},u({...m,qr_codes:r})},N=e=>{if(!(null==m?void 0:m.qr_codes))return;let l=m.qr_codes.filter((l,s)=>s!==e);u({...m,qr_codes:l})},_=(e,l,s)=>{if(!(null==m?void 0:m.app_store_links))return;let r=[...m.app_store_links];r[e]={...r[e],[l]:s},u({...m,app_store_links:r})},w=e=>{if(!(null==m?void 0:m.app_store_links))return;let l=m.app_store_links.filter((l,s)=>s!==e);u({...m,app_store_links:l})},k=(e,l,s)=>{if(!(null==m?void 0:m.gallery_images))return;let r=[...m.gallery_images];r[e]={...r[e],[l]:s},u({...m,gallery_images:r})},C=e=>{if(!(null==m?void 0:m.gallery_images))return;let l=m.gallery_images.filter((l,s)=>s!==e);u({...m,gallery_images:l})};return!n||x?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"로딩 중..."})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d(),{href:"/admin/dashboard",className:"text-blue-600 hover:text-blue-800 mr-4",children:"← 대시보드"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"푸터 설정"})]})})})}),(0,r.jsx)("main",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"푸터 정보"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"회사 정보, 연락처, QR 코드, 앱 다운로드 등을 관리합니다."})]}),(0,r.jsxs)("form",{onSubmit:v,className:"px-6 py-4 space-y-8",children:[(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"로고 설정"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"로고 이미지 URL"}),(0,r.jsx)("input",{type:"url",value:(null==m?void 0:m.logo_url)||"",onChange:e=>f("logo_url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/logo.png"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"로고 클릭 시 이동할 URL"}),(0,r.jsx)("input",{type:"url",value:(null==m?void 0:m.logo_link_url)||"",onChange:e=>f("logo_link_url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"})]})]})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"회사 정보"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"회사명"}),(0,r.jsx)("input",{type:"text",value:(null==m?void 0:m.company_name)||"",onChange:e=>f("company_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"승승통신"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"전화번호"}),(0,r.jsx)("input",{type:"text",value:(null==m?void 0:m.phone)||"",onChange:e=>f("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"010-1234-5678"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"주소"}),(0,r.jsx)("input",{type:"text",value:(null==m?void 0:m.address)||"",onChange:e=>f("address",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"서울시 강남구 테헤란로 123"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"영업시간"}),(0,r.jsx)("input",{type:"text",value:(null==m?void 0:m.business_hours)||"",onChange:e=>f("business_hours",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"평일 09:00-18:00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"배경색"}),(0,r.jsx)("input",{type:"color",value:(null==m?void 0:m.background_color)||"#1f2937",onChange:e=>f("background_color",e.target.value),className:"w-full h-10 border border-gray-300 rounded-md"})]})]})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"앱 다운로드 섹션"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"메인 텍스트"}),(0,r.jsx)("input",{type:"text",value:(null==m?void 0:m.app_download_text)||"",onChange:e=>f("app_download_text",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"편리함을 더하다"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"부제목"}),(0,r.jsx)("input",{type:"text",value:(null==m?void 0:m.app_download_subtitle)||"",onChange:e=>f("app_download_subtitle",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"지금 바로 앱에서 보세요"})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"앱스토어 링크"}),(0,r.jsx)("button",{type:"button",onClick:()=>{if(!m)return;let e=m.app_store_links||[];u({...m,app_store_links:[...e,{name:"",url:"",icon:""}]})},className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ 링크 추가"})]}),null==m||null==(e=m.app_store_links)?void 0:e.map((e,l)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"이름"}),(0,r.jsx)("input",{type:"text",value:e.name,onChange:e=>_(l,"name",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"Google Play"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"아이콘 (이모지)"}),(0,r.jsx)("input",{type:"text",value:e.icon,onChange:e=>_(l,"icon",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"\uD83D\uDCF1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"URL"}),(0,r.jsx)("input",{type:"url",value:e.url,onChange:e=>_(l,"url",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"https://play.google.com/..."})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{type:"button",onClick:()=>w(l),className:"text-red-600 hover:text-red-800 text-sm",children:"삭제"})})]},l))]})]}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,r.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"이미지 갤러리"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"메인 추천 이미지"}),(0,r.jsx)(i.A,{currentImageUrl:null==m?void 0:m.feature_image_url,onImageUploaded:e=>f("feature_image_url",e),folder:"gallery",placeholder:"메인 추천 이미지 업로드"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"갤러리 이미지"}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=(null==m?void 0:m.gallery_images)||[];u({...m,gallery_images:[...e,{name:"",url:""}]})},className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ 갤러리 이미지 추가"})]}),null==m||null==(l=m.gallery_images)?void 0:l.map((e,l)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"이미지 이름"}),(0,r.jsx)("input",{type:"text",value:e.name,onChange:e=>k(l,"name",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"이미지 이름"}),(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:(0,r.jsx)("button",{type:"button",onClick:()=>C(l),className:"text-red-600 hover:text-red-800 text-sm",children:"이미지 삭제"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"이미지"}),(0,r.jsx)("div",{className:"w-full max-w-xs mx-auto",children:(0,r.jsx)(i.A,{currentImageUrl:e.url,onImageUploaded:e=>k(l,"url",e),folder:"gallery",placeholder:"갤러리 이미지 업로드"})}),e.url&&(0,r.jsx)("div",{className:"mt-2 text-center",children:(0,r.jsx)("img",{src:e.url,alt:e.name,className:"w-16 h-16 mx-auto border border-gray-200 rounded object-cover"})})]})]},l))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"QR 코드"}),(0,r.jsx)("button",{type:"button",onClick:()=>{if(!m)return;let e=m.qr_codes||[];u({...m,qr_codes:[...e,{name:"",url:""}]})},className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ QR 코드 추가"})]}),null==m||null==(s=m.qr_codes)?void 0:s.map((e,l)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-4 border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"QR 코드 이름"}),(0,r.jsx)("input",{type:"text",value:e.name,onChange:e=>j(l,"name",e.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"카카오톡 상담"}),(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:(0,r.jsx)("button",{type:"button",onClick:()=>N(l),className:"text-red-600 hover:text-red-800 text-sm",children:"QR 코드 삭제"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"QR 코드 이미지"}),(0,r.jsx)("div",{className:"w-full max-w-xs mx-auto",children:(0,r.jsx)(i.A,{currentImageUrl:e.url,onImageUploaded:e=>j(l,"url",e),folder:"qr-codes",placeholder:"QR 코드 이미지 업로드"})}),e.url&&(0,r.jsx)("div",{className:"mt-2 text-center",children:(0,r.jsx)("img",{src:e.url,alt:e.name,className:"w-20 h-20 mx-auto border border-gray-200 rounded"})})]})]},l))]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,r.jsx)(d(),{href:"/admin/dashboard",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"취소"}),(0,r.jsx)("button",{type:"submit",disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:b?"저장 중...":"저장"})]})]})]})})]})}}},e=>{var l=l=>e(e.s=l);e.O(0,[874,647,441,303,358],()=>l(2013)),_N_E=e.O()}]);