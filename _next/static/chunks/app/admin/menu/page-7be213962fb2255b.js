(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[836],{617:(e,s,r)=>{Promise.resolve().then(r.bind(r,9046))},2099:(e,s,r)=>{"use strict";r.d(s,{N:()=>d});var t=r(5647),a=r(1890);let l=a.env.NEXT_PUBLIC_SUPABASE_URL||"https://suznpkxteqhvqvlaenrq.supabase.co",n=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1em5wa3h0ZXFodnF2bGFlbnJxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzQ2NDYsImV4cCI6MjA2NjkxMDY0Nn0.hgGYLUWMoyjB4SpyEfR2nOqaAvPonaefyRZ6T3UYRO8",d=null;try{d=(0,t.UU)(l,n)}catch(e){console.warn("Supabase client initialization failed:",e),d={from:()=>({select:()=>({data:null,error:null}),insert:()=>({data:null,error:null}),update:()=>({data:null,error:null}),delete:()=>({data:null,error:null}),eq:()=>({}),order:()=>({})})}}},5695:(e,s,r)=>{"use strict";var t=r(8999);r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},9046:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(5155),a=r(2115),l=r(5695),n=r(6874),d=r.n(n),i=r(2099);function o(){let[e,s]=(0,a.useState)(!1),[r,n]=(0,a.useState)([]),[o,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(!1),[b,h]=(0,a.useState)(null),p=(0,l.useRouter)();(0,a.useEffect)(()=>{"true"===localStorage.getItem("admin_auth")?(s(!0),g()):p.push("/admin")},[p]);let g=async()=>{try{let{data:e}=await i.N.from("menu_items").select("*").order("sort_order");e&&n(e)}catch(e){console.error("Error fetching menu items:",e)}finally{u(!1)}},f=async e=>{try{let s={...e};if("board"===e.menu_type&&e.board_table_name){let r=e.board_table_name.replace("board_","");s.url="/board/".concat(r)}if(e.id&&"new"!==e.id){let{id:r,created_at:t,updated_at:a,...l}=s,{error:n}=await i.N.from("menu_items").update(l).eq("id",e.id);if(n)throw n}else{let{id:e,created_at:r,updated_at:t,...a}=s,{error:l}=await i.N.from("menu_items").insert(a);if(l)throw l}await g(),x(!1),h(null),alert("메뉴가 성공적으로 저장되었습니다!")}catch(e){console.error("Error saving menu:",e),alert("저장 중 오류가 발생했습니다.")}},j=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{let{error:s}=await i.N.from("menu_items").delete().eq("id",e);if(s)throw s;await g(),alert("메뉴가 삭제되었습니다!")}catch(e){console.error("Error deleting menu:",e),alert("삭제 중 오류가 발생했습니다.")}},y={id:"new",title:"",url:"",sort_order:r.length+1,is_active:!0,has_dropdown:!1,menu_type:"link",board_table_name:"",created_at:"",updated_at:""};return!e||o?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"로딩 중..."})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(d(),{href:"/admin/dashboard",className:"text-blue-600 hover:text-blue-800 mr-4",children:"← 대시보드"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"메뉴 관리"})]}),(0,t.jsx)("button",{onClick:()=>{h(y),x(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"새 메뉴 추가"})]})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[m&&b&&(0,t.jsx)(c,{menu:b,presetBoards:[{id:"board_notice",name:"공지사항",description:"중요한 공지사항을 게시합니다"},{id:"board_faq",name:"자주묻는질문",description:"FAQ와 도움말을 제공합니다"},{id:"board_qna",name:"질문답변",description:"질문과 답변을 주고받습니다"},{id:"board_news",name:"뉴스/소식",description:"최신 뉴스와 소식을 전합니다"},{id:"board_free",name:"자유게시판",description:"자유로운 의견을 나눕니다"}],onSave:f,onCancel:()=>{x(!1),h(null)}}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"메뉴 목록"})}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:r.map(e=>(0,t.jsxs)("div",{className:"p-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:e.title}),(0,t.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:["타입: ","link"===e.menu_type?"링크":"board"===e.menu_type?"게시판":"드롭다운"]}),e.url&&(0,t.jsxs)("span",{children:["URL: ",e.url]}),e.board_table_name&&(0,t.jsxs)("span",{children:["테이블: ",e.board_table_name]}),(0,t.jsxs)("span",{children:["순서: ",e.sort_order]}),(0,t.jsx)("span",{className:e.is_active?"text-green-600":"text-red-600",children:e.is_active?"활성":"비활성"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{h(e),x(!0)},className:"text-blue-600 hover:text-blue-800 px-3 py-1 text-sm",children:"편집"}),(0,t.jsx)("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-800 px-3 py-1 text-sm",children:"삭제"})]})]},e.id))})]})]})]})}function c(e){var s;let{menu:r,presetBoards:l,onSave:n,onCancel:d}=e,[i,o]=(0,a.useState)(r),c=e=>{let s=l.find(s=>s.id===e);s&&o({...i,board_table_name:e,title:s.name,url:"/board/".concat(e.replace("board_",""))})};return(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg mb-6",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"new"===r.id?"새 메뉴 추가":"메뉴 편집"})}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(i)},className:"px-6 py-4 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"메뉴 제목"}),(0,t.jsx)("input",{type:"text",value:i.title,onChange:e=>o({...i,title:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"메뉴 타입"}),(0,t.jsxs)("select",{value:i.menu_type,onChange:e=>o({...i,menu_type:e.target.value,url:"board"===e.target.value?"":i.url,board_table_name:"board"===e.target.value?"":i.board_table_name}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"link",children:"링크"}),(0,t.jsx)("option",{value:"board",children:"게시판"}),(0,t.jsx)("option",{value:"dropdown",children:"드롭다운"})]})]})]}),"link"===i.menu_type&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),(0,t.jsx)("input",{type:"url",value:i.url||"",onChange:e=>o({...i,url:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com",required:"link"===i.menu_type})]}),"board"===i.menu_type&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"게시판 선택"}),(0,t.jsxs)("select",{value:i.board_table_name||"",onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"게시판을 선택하세요"}),l.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]}),i.board_table_name&&(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"text-md font-medium text-blue-900 mb-2",children:"선택된 게시판 정보"}),(0,t.jsxs)("div",{className:"text-sm text-blue-700 space-y-1",children:[(0,t.jsxs)("p",{children:["• 테이블명: ",i.board_table_name]}),(0,t.jsxs)("p",{children:["• URL: ",i.url]}),(0,t.jsxs)("p",{children:["• 설명: ",null==(s=l.find(e=>e.id===i.board_table_name))?void 0:s.description]})]}),(0,t.jsx)("div",{className:"mt-3 text-xs text-blue-600",children:(0,t.jsx)("p",{children:"※ 이 게시판은 이미 Supabase에 생성되어 있으며 즉시 사용 가능합니다."})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"정렬 순서"}),(0,t.jsx)("input",{type:"number",value:i.sort_order,onChange:e=>o({...i,sort_order:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"상태"}),(0,t.jsxs)("select",{value:i.is_active?"true":"false",onChange:e=>o({...i,is_active:"true"===e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"true",children:"활성"}),(0,t.jsx)("option",{value:"false",children:"비활성"})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex items-center space-x-2 pt-8",children:[(0,t.jsx)("input",{type:"checkbox",checked:i.has_dropdown,onChange:e=>o({...i,has_dropdown:e.target.checked}),className:"rounded",disabled:"dropdown"!==i.menu_type}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"드롭다운 메뉴"})]})})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"취소"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"저장"})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[874,647,441,303,358],()=>s(617)),_N_E=e.O()}]);